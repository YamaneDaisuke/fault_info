# charakoba_fault_info

# 使い方
## 環境

Python 2.xとWSGIの環境で動作します。動作テストはapache + mod_wsgiで行っています。

## 設定

config.json.defaultをconfig.jsonというファイルにコピーして、中の空欄を埋めてください。それぞれの設定項目の意味は以下です。

| 名前 | 意味 | 例 |
| BASE_URI | ルートまでのアドレス | "http://hoge.example.com/" |
| DB_INFO | MySQL データベースの情報 |
| TWITTER_INFO | twitter REST APIの情報 |

## エンドポイント

### POST /api

障害情報をデータベースに保存し、ツイートを行います。

#### リソース情報

| レスポンス形式 | JSON |

#### 必須パラメータ

| パラメータ名 | 意味                                       |
|:------------:|:------------------------------------------:|
| type         | 障害(event)・メンテナンス(maintenance)の別 |
| service      | 影響サービス                               |
| begin        | 障害発生/メンテナンス開始の時刻            |

#### オプションパラメータ

| パラメータ名 | 意味                            |
|:------------:|:-------------------------------:|
| end          | 障害解決/メンテナンス終了の時刻 |
| detail       | 障害/メンテナンスの詳細         |

### GET /api

障害情報を取得します。

#### リソース情報

| レスポンス形式 | JSON |

#### オプションパラメータ

| パラメータ名 | 意味                                                            |
|:------------:|:---------------------------------------------------------------:|
| all          | (1 or true orTrue)で全件取得。デフォルトは(0 or false or False) |
| issue        | レコードid(指定しなければlatestを取得)                          |
